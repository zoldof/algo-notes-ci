# 仕様
- StaticビルドによるPagesプレビュー
- Jekyllビルドによる別リポジトリへの成果物保存
- ファイル一括のディレクトリ移動
- KaTeXのテスト用ページ

＊［修正履歴，dev-scratch］は降順

# 発端と設計意図
## 結局なんのために作ったものか？
ページの編集とプレビューと投稿を意図的に処理分けして見直し工程を明確化したい
その中でできる限りビルド速度は速くしたい
数式に対応した投稿プラットフォームを自前で用意して、ページの挙動も理解したかったし、UIの面で自分好みにできるのが強みとの思いからページ作成に至る

## 修正履歴
- 試行錯誤履歴：［test］test.html ⇔ ［main］
  - こちらはパス構造ではないので気を付ける
  - 意図はそれぞれ［テスト，ビルド用］
  - テスト表示だとフロントマターは残存する
  - デフォルトビルド後は、一時的にテスト表示ができなくなる場合がある
  - おそらく使用したいファイルがビルドによって扱えなくなる
  - ［test］でテスト［main］でビルドの流れを把握しつつ、各ファイルの更新と開発段階に合わせて柔軟にデフォルトブランチを変更する手筈になっている

- ビルド成果物を別リポジトリへ出力することによってテストページとの分離に成功
  - 同一リポジトリ内でもファイルを分けたら可能ではあったかもだが、分けてしまうと本来のテストの意味がなくなる
 
- デフォルトビルド時にテストページ表示も並立できるのは一時的なキャッシュの影響で、特定秒数が経つと表示不可になる

- 一様はテストページ（Static）とビルドページ（Jekyll）で分けられる形にはなった

- 自分用ページを作りたいとの意図でPVを分ける目的を持ったが、解析ツールで設定することとした

- パス構造の理解と修正

- ブラウザ側のキャッシュはビルド構成にmoduleタイプのjsが含まれる場合は更新される可能性がある
  - 各動作を調査

- キャッシュはビルド設定で保存する仕組みにもできる

- workflowsをPagesのActions設定により取得［Jekyll，Static］

- _includes/head.htmlによるhtml（KaTeXのCDN）の部分的挿入

- KaTeXのレンダリング処理とMathjaxの導入試験
  - katex.jsの作成

- Jekyllの深掘り

- txtとmdの区別およびmarkedとkramdownの理解
  - noindexのフロントマター指定
  - GFMについて検索
  - _layouts/default.htmlによる使いまわし
  - _config.ymlでビルド時のMarkdownを指定

- テストについてクエリ呼び出しでのファイル運用
  - pyodideで使った知識を活用

- fetchやJekyllの理解と使い方（特にfetch）
  - DOMを待つであるとか構造の話

- Githubの機能面の理解を深める
  - htmlの1枚ものから作成開始
  - 機能複雑化に伴いmain.jsとstyle.cssを分けた

- 動機としてはページのテストにあたりビルド時間を削減したい
  - そもそもプレビューしてから投稿できる仕組みだけでいいのでは？
    ↑自身としては都度投稿して全体像を確認する方がページごとの管理がしやすい
    ↑ひとつ段階を得られるという意味合いと、テスト段階のページを「成果物想定」との認識で評価できるため
